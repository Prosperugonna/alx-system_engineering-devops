#!/usr/bin/env bash

# This script manages the manage_my_process script

# Define the path to the PID file
PIDFILE=/var/run/my_process.pid

# Define a function to start the process
start() {
  # Check if the process is already running
  if [ -e $PIDFILE ]
  then
    echo "manage_my_process is already running. PID: $(cat $PIDFILE)"
    return
  fi

  # Start the process
  nohup ./manage_my_process.sh > /dev/null 2>&1 &
  PID=$!
  echo $PID > $PIDFILE
  echo "manage_my_process started. PID: $PID"
}

# Define a function to stop the process
stop() {
  # Check if the PID file exists
  if [ ! -e $PIDFILE ]
  then
    echo "manage_my_process is not running"
    return
  fi

  # Stop the process
  PID=$(cat $PIDFILE)
  kill $PID
  rm $PIDFILE
  echo "manage_my_process stopped. PID: $PID"
}

# Define a function to restart the process
restart() {
  stop
  start
  echo "manage_my_process restarted"
}

# Check the argument passed to the script
case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
  restart)
    restart
    ;;
  *)
    echo "Usage: $0 {start|stop|restart}"
    exit 1
    ;;
esac

exit 0
